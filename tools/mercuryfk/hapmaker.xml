<tool id="hapmaker" name="hapmaker" version="@VERSION@+galaxy@VERSION_SUFFIX@" profile="21.05">
    <expand macro="description"/>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <command detect_errors="exit_code"><![CDATA[
        ln -s $maternal maternal.ktab &&
        ln -s $paternal paternal.ktab &&
        ln -s $child child.ktab &&
        HAPmaker -v 
        -T\${GALAXY_SLOTS:-4}
        maternal.ktab
        paternal.ktab
        child.ktab
    ]]></command>
    <inputs>
        <param name="maternal" type="data" format="ktab" label="Maternal" help="Maternal fastk kmer table"/>
        <param name="paternal" type="data" format="ktab" label="Paternal" help="Paternal fastk kmer table"/>
        <param name="child" type="data" format="ktab" label="Child" help="Child fastk kmer table"/>
    </inputs>
    <outputs>
        <data name="paternal_out" format="ktab" from_work_dir="paternal.hap.ktab" label="${tool.name} on ${on_string}: paternal hap-mers"/>
        <data name="maternal_out" format="ktab" from_work_dir="maternal.hap.ktab" label="${tool.name} on ${on_string}: maternal hap-mers"/>
    </outputs>
    <tests>
        <test expect_num_outputs="2">
            <param name="maternal" ftype="ktab" value="maternal.ktab"/>
            <param name="paternal" ftype="ktab" value="paternal.ktab"/>
            <param name="child" ftype="ktab" value="child.ktab"/>
            <output name="paternal_out" value="hapmaker_paternal.hap.ktab"/>
            <output name="maternal_out" value="hapmaker_maternal.hap.ktab"/>            
        </test>
    </tests>
    <expand macro="citation"/>
    <help><![CDATA[
        Generate hap-mer tables for parental datasets for merquryfk pipeline
    ]]></help>
</tool>